# üöÄ CI/CD Pipeline –¥–ª—è Hysteria2 VPN Client - –ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä

## ‚ú® –ß—Ç–æ —É–º–µ–µ—Ç –Ω–∞—à CI/CD

### üåç **–ü–æ–ª–Ω–∞—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**
–ù–∞—à CI/CD pipeline –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è **–í–°–ï–•** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º:

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | ‚úÖ –°—Ç–∞—Ç—É—Å | üèóÔ∏è –ê–≤—Ç–æ—Å–±–æ—Ä–∫–∞ | üì¶ –ê–≤—Ç–æ—Ä–µ–ª–∏–∑ | üöÄ –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π |
|-----------|-----------|----------------|--------------|----------------|
| **Android** | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | APK + AAB | Google Play | Firebase |
| **iOS** | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | Archive + Simulator | App Store | TestFlight |
| **Windows** | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | Native EXE | Microsoft Store | GitHub Releases |
| **Linux** | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | Native Binary | Snap/Flatpak | GitHub Releases |
| **macOS** | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | Universal App | Mac App Store | GitHub Releases |
| **Web** | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | PWA | CDN | Vercel/Netlify |
| **Docker** | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | Multi-arch | Docker Hub | Kubernetes |

## üîÑ **Workflow —Ñ–∞–π–ª—ã**

### 1. **–û—Å–Ω–æ–≤–Ω–æ–π CI/CD Pipeline** (`.github/workflows/ci.yml`)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Node.js
- **–°–±–æ—Ä–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- **Docker**: Multi-architecture –æ–±—Ä–∞–∑—ã
- **–†–µ–ª–∏–∑—ã**: –°–æ–∑–¥–∞–Ω–∏–µ GitHub Releases —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–ª–∏–∑—ã** (`.github/workflows/release.yml`)
- **–¢—Ä–∏–≥–≥–µ—Ä**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ–≥–∞ `v*`
- **Changelog**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ –∫–æ–º–º–∏—Ç–æ–≤
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: –ó–∞–≥—Ä—É–∑–∫–∞ –±–∏–ª–¥–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

### 3. **Kubernetes –¥–µ–ø–ª–æ–π** (`.github/workflows/deploy.yml`)
- **–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π**: –í AWS EKS –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: Slack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### 4. **–ú–∞—Ç—Ä–∏—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (`.github/workflows/test-matrix.yml`)
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã**: Ubuntu, Windows, macOS
- **Node.js**: –í–µ—Ä—Å–∏–∏ 18.x –∏ 20.x
- **–¢–µ—Å—Ç—ã**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

### üèóÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞**
```yaml
# –ü—Ä–∏–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã —Å–±–æ—Ä–∫–∏
strategy:
  matrix:
    platform: [android, ios, windows, linux, macos, web]
    architecture: [x64, arm64, armv7]
    build_type: [debug, release]
```

### üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- **–ü–æ–¥–ø–∏—Å—å APK**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **Code Signing**: iOS –∏ macOS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- **Docker Security**: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- **Dependency Audit**: –ü—Ä–æ–≤–µ—Ä–∫–∞ npm –ø–∞–∫–µ—Ç–æ–≤

### üì± **Store –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
- **Google Play**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ AAB
- **App Store**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ App Store Connect
- **Microsoft Store**: MSIX –ø–∞–∫–µ—Ç—ã –¥–ª—è Windows
- **Snap/Flatpak**: Linux –ø–∞–∫–µ—Ç—ã

### ‚òÅÔ∏è **–û–±–ª–∞—á–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- **AWS EKS**: Kubernetes –∫–ª–∞—Å—Ç–µ—Ä
- **Docker Hub**: Multi-architecture –æ–±—Ä–∞–∑—ã
- **GitHub Releases**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–ª–∏–∑—ã
- **CDN**: –í–µ–±-–≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üöÄ **–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–ª–∏–∑**

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞**
```bash
git tag v1.0.0
git push origin v1.0.0
```

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å**
```mermaid
graph TD
    A[–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞] --> B[–ó–∞–ø—É—Å–∫ CI/CD]
    B --> C[–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]
    C --> D[–°–±–æ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º]
    D --> E[–°–æ–∑–¥–∞–Ω–∏–µ GitHub Release]
    E --> F[–ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤]
    F --> G[–î–µ–ø–ª–æ–π –≤ Kubernetes]
    G --> H[Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è]
```

### 3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**
- ‚úÖ **GitHub Release** —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- ‚úÖ **Docker –æ–±—Ä–∞–∑—ã** –≤ registry
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

## üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏**

### **GitHub Actions**
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ job
- –°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–∫–∏ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö —Å–±–æ—Ä–æ–∫

### **Kubernetes**
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Health checks

### **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
- **Slack**: –°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ–µ–≤
- **Email**: GitHub —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Webhooks**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## üõ†Ô∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

### **GitHub Secrets**
```bash
# Docker
DOCKER_USERNAME=your-username
DOCKER_PASSWORD=your-password

# Android
ANDROID_KEYSTORE_BASE64=base64-keystore
ANDROID_STORE_PASSWORD=password
ANDROID_KEY_ALIAS=alias
ANDROID_KEY_PASSWORD=password

# AWS
AWS_ACCESS_KEY_ID=key
AWS_SECRET_ACCESS_KEY=secret
AWS_REGION=us-east-1
EKS_CLUSTER_NAME=cluster

# Slack
SLACK_WEBHOOK_URL=webhook
```

### **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º**
- **Android**: `android/app/build.gradle`
- **iOS**: `ios/Podfile` –∏ entitlements
- **Windows**: `windows/Hysteria2VpnClient.sln`
- **Linux**: `linux/CMakeLists.txt`
- **macOS**: `macos/Hysteria2VpnClient.xcodeproj`

## üîß **–°–∫—Ä–∏–ø—Ç—ã –∏ —É—Ç–∏–ª–∏—Ç—ã**

### **NPM —Å–∫—Ä–∏–ø—Ç—ã**
```json
{
  "scripts": {
    "build:all": "–°–±–æ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º",
    "build:android": "–°–±–æ—Ä–∫–∞ Android APK/AAB",
    "build:ios": "–°–±–æ—Ä–∫–∞ iOS Archive",
    "build:windows": "–°–±–æ—Ä–∫–∞ Windows EXE",
    "build:linux": "–°–±–æ—Ä–∫–∞ Linux Binary",
    "build:macos": "–°–±–æ—Ä–∫–∞ macOS App",
    "build:web": "–°–±–æ—Ä–∫–∞ PWA",
    "clean:all": "–û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Å–±–æ—Ä–æ–∫"
  }
}
```

### **Bash —Å–∫—Ä–∏–ø—Ç—ã**
- `scripts/build-all.sh` - –°–±–æ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- `scripts/deploy.sh` - –î–µ–ø–ª–æ–π –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
- `scripts/test-matrix.sh` - –ú–∞—Ç—Ä–∏—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìà **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞—à–µ–≥–æ CI/CD**

### üöÄ **–°–∫–æ—Ä–æ—Å—Ç—å**
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞** –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–ª–æ–µ–≤ Docker
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ** build tools

### üîí **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
- **Rollback** –ø—Ä–∏ –Ω–µ—É—Å–ø–µ—à–Ω–æ–º –¥–µ–ø–ª–æ–µ
- **Health checks** –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### üåç **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- **Multi-architecture** –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **Cloud-native** —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- **Auto-scaling** –≤ Kubernetes

### üí∞ **–≠–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å**
- **GitHub Actions**: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–∏–Ω—É—Ç—ã –¥–ª—è open source
- **Docker**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã
- **AWS**: Pay-per-use –º–æ–¥–µ–ª—å

## üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç**

–° –Ω–∞—à–∏–º CI/CD pipeline –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:

1. **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** - –ù–∏–∫–∞–∫–∏—Ö —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
2. **üåç –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - –û–¥–∏–Ω –∫–æ–¥, –≤—Å–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
3. **üöÄ –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ–ª–∏–∑—ã** - –û—Ç –∫–æ–º–º–∏—Ç–∞ –¥–æ –ø—Ä–æ–¥–∞–∫—à–Ω–∞ –∑–∞ –º–∏–Ω—É—Ç—ã
4. **üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
5. **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ü–æ–ª–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞
6. **üõ†Ô∏è –ü—Ä–æ—Å—Ç–æ—Ç–∞** - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## üìö **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

- **`.github/CICD_SETUP.md`** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **`.github/PLATFORM_CONFIGS.md`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º
- **`README.md`** - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---

**üéØ –í—ã–≤–æ–¥**: –ù–∞—à CI/CD pipeline –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–ø–æ–ª–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Hysteria2 VPN Client –Ω–∞ **–≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö** —Å **–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º** –∏ **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∑–∞—Ç—Ä–∞—Ç–∞–º–∏**.
